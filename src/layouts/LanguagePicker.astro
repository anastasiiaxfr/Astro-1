---
// src/components/LanguagePicker.astro
import { supportedLanguages, languageLabels } from "../i18n/config";

const { currentLang } = Astro.props;

// Get current path
const pathname = Astro.url.pathname;

// Determine the current page path without language prefix
let currentPath = "/";
if (currentLang && pathname.startsWith(`/${currentLang}`)) {
  currentPath = pathname.replace(`/${currentLang}`, "") || "/";
}
---

<ul>
  {
    supportedLanguages.map((lang) => {
      // For the default language (en), link to root paths
      // For other languages, add language prefix
      const href = lang === "en" ? currentPath : `/${lang}${currentPath}`;

      return (
        <li>
          <a
            href={href}
            aria-current={lang === currentLang ? "page" : undefined}
          >
            {languageLabels[lang]}
          </a>
        </li>
      );
    })
  }
</ul>

<style>
  ul {
    display: flex;
    gap: 1rem;
    list-style: none;
    padding: 0;
  }

  a[aria-current="page"] {
    font-weight: bold;
    text-decoration: none;
  }
</style>
